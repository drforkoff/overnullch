"use strict";function main(){if(location.search){var a=/url=([^&]+)/.exec(location.search),b=/description=([^&]+)/.exec(location.search);a&&(a=decodeURIComponent(a[1]),$("#url").val(a)),b&&(b=decodeURIComponent(b[1]),$("#description").val(b))}$.ajaxSetup({dataType:"json"}),$("#closer").click(parent.toggleShare),$("form").on("submit",function(a){a.preventDefault(),$(this).addClass("busy"),$.post("api.php",{url:$("#url").val(),description:$("#description").val()}).done(handleResponse.bind(this))}),$("#error-wrapper").click(function(){return $("form").removeClass("error")})}function handleResponse(a){if($("form").removeClass("busy"),a.error){var b=a.error;$("form").addClass("error"),$("#errorbox").text("string"==typeof b?errorDescriptors[b]||b:errorDescriptors.hasOwnProperty(b.errtype)?errorDescriptors[b.errtype](b.errdata):"".concat(b.errtype," (").concat(b.errdata,")"))}else{var c=!1;parent._frames&&parent.frames.list&&parent.frames.live&&(parent.frames.list.live.build(a.data),parent.frames.list.live.toggle(!0),"horizontal"==parent._frames.layout&&parent.frames.list.menu.open(),c=!0),$("form").addClass("success"),setTimeout(function(){c&&parent.$("#live").removeClass("shown"),$("input").val("")},1500),setTimeout(function(){$("form").removeClass("success")},2e3)}}var errorDescriptors={"no-data-provided":"\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445","url-too-long":"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0434\u043B\u0438\u043D\u043D\u044B\u0439 URL","description-too-long":"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0434\u043B\u0438\u043D\u043D\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435","description-too-short":"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435","bad-url":"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 SQL","url-exists":"\u0414\u0430\u043D\u043D\u0430\u044F \u0441\u0441\u044B\u043B\u043A\u0430 \u0443\u0436\u0435 \u043F\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0441\u043F\u0438\u0441\u043A\u0435",timeout:function b(a){return"\u0422\u0430\u0439\u043C\u0430\u0443\u0442 ".concat(a," \u0441\u0435\u043A.")},"sql-error":"\u041E\u0448\u0438\u0431\u043A\u0430 SQL"};
//# sourceMappingURL=live.js.map